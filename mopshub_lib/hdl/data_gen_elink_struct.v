//
// Module mopshub_lib.data_gen_elink.struct
//
// Created:
//          by - dcs.dcs (chipdev2.physik.uni-wuppertal.de)
//          at - 17:59:07 08/17/21
//
// Generated by Mentor Graphics' HDL Designer(TM) 2019.4 (Build 4)
//

`resetall
`timescale 1ns/10ps
module data_gen_elink #(
   // synopsys template
   parameter DATA_WIDTH = 16,
   parameter max_cnt    = 11
)
( 
   // Port Declarations
   input   wire           bitCLK, 
   input   wire           bitCLKx4, 
   input   wire           genCLK, 
   input   wire           loop_en, 
   input   wire           reverse_stream_10b, 
   input   wire           rst, 
   input   wire           swap_tx_bits, 
   input   wire           tx_fifo_pfull, 
   output  wire           done, 
   output  wire           getDataTrig, 
   output  wire    [1:0]  tx_elink2bit
);


// Internal Declarations


// Local declarations

// Internal signal declarations
wire  [4:0]  addr;                          // request to caninterface block
wire         buffer_rec_en;
wire         cs_elink;
reg   [1:0]  delimeter_reg       = 2'b0;
wire         elink_dbg           = 1'b1;
wire         end_write_elink;               // request to bridge FSM
wire  [9:0]  gen_edata_10bit;
reg   [7:0]  gen_edata_8bit_reg  = 8'b0;
wire  [75:0] gen_edata_rec;
reg   [75:0] gen_edata_rec_reg   = 76'b0;
wire         irq_elink_rec;
wire         reset;
wire         start_read_elink;
wire  [2:0]  state_o;


// Instances 
data_gen_elink_SM DataGen( 
   .clk               (genCLK), 
   .cnt_done          (irq_elink_rec), 
   .loop_en           (loop_en), 
   .rst               (rst), 
   .tx_fifo_pfull_gen (tx_fifo_pfull), 
   .done              (done), 
   .start_read_elink  (start_read_elink), 
   .state_o           (state_o)
); 

elink_interface_SM elink_interface_SM_gen( 
   .abort             (), 
   .clk               (genCLK), 
   .din_elink_flag    (), 
   .elink_dbg         (elink_dbg), 
   .fifo_data_eop     (), 
   .fifo_data_sop     (), 
   .fifo_elink_rdy    (), 
   .rst               (rst), 
   .start_write_elink (start_read_elink), 
   .timeoutrst        (), 
   .addr              (addr), 
   .buffer_elink_en   (), 
   .buffer_rec_en     (buffer_rec_en), 
   .cs_elink          (cs_elink), 
   .end_read_elink    (), 
   .end_write_elink   (end_write_elink), 
   .irq_elink_rec     (irq_elink_rec), 
   .irq_elink_tra     (), 
   .start_read_elink  (), 
   .statedeb          ()
); 

elink_proc_out_enc8b10b elink_proc_out_enc8b10b0( 
   .bitCLKx4           (bitCLKx4), 
   .bitCLK             (bitCLK), 
   .EDATA_IN           (gen_edata_10bit), 
   .EDATA_RDY          (cs_elink), 
   .reverse_stream_10b (reverse_stream_10b), 
   .swap_outbits       (swap_tx_bits), 
   .rst                (reset), 
   .getDataTrig        (getDataTrig), 
   .EDATA_OUT          (tx_elink2bit)
); 

rec_elink_buf rec_elink_buf_gen( 
   .clk          (genCLK), 
   .data_rec_in  (gen_edata_8bit_reg), 
   .buffer_en    (buffer_rec_en), 
   .rst          (rst), 
   .addr         (addr), 
   .data_rec_out (gen_edata_rec)
); 

// HDL Embedded Text Block 2 data_loader1
// data_loader 1
//sel din process
assign gen_edata_10bit ={delimeter_reg,gen_edata_8bit_reg}; 
assign reset = !rst;  
always @(posedge genCLK)
begin 
  if(rst == 1 | loop_en == 1)
  case (addr)
    5'b0 : begin 
      gen_edata_8bit_reg  <= 8'h00;
      delimeter_reg  <= 2'b11;
    end
    5'b00001 : begin 
      gen_edata_8bit_reg  <= 8'h00;
      delimeter_reg  <= 2'b10;
    end
    5'b00010 : begin 
      gen_edata_8bit_reg  <= 8'hDE;
      delimeter_reg  <= 2'b00;
    end
    5'b00011 : begin 
      gen_edata_8bit_reg  <= 8'hAD;
      delimeter_reg <= 2'b00;
    end
    5'b00100 : begin 
      gen_edata_8bit_reg  <= 8'hBE;
      delimeter_reg  <= 2'b00;
    end
    5'b00101 : begin 
      gen_edata_8bit_reg  <= 8'hEF;
      delimeter_reg <= 2'b00;
    end
    5'b00110 : begin 
      gen_edata_8bit_reg  <=8'hDE;
      delimeter_reg  <=2'b00;
    end
    5'b00111 : begin 
      gen_edata_8bit_reg  <= 8'hAD;
      delimeter_reg  <= 2'b00;
    end
    5'b01000 : begin 
      gen_edata_8bit_reg  <= 8'hBE;
      delimeter_reg  <= 2'b00;
    end
    5'b01001 : begin 
      gen_edata_8bit_reg  <= 8'hEF;
      delimeter_reg <= 2'b00;
    end
    5'b01010 : begin 
      gen_edata_8bit_reg  <= 8'hDE;
      delimeter_reg <= 2'b00;
    end
    5'b01011 : begin 
      gen_edata_8bit_reg  <= {4'hA,4'hF};
      delimeter_reg <= 2'b00;

    end  
    5'b01100 : begin 
      gen_edata_8bit_reg  <=8'h00;
      delimeter_reg  <=2'b01;
    end
    default : begin 
      gen_edata_8bit_reg  <=8'h0;
      delimeter_reg  <=2'b11;
    end
    
  endcase
  else
  begin
    gen_edata_8bit_reg <= 8'h0;
    delimeter_reg  <=2'b11;
  end
end                                            













































// HDL Embedded Text Block 7 Data_rdy_signal1
//Save data into a buffer
always@(posedge genCLK )
begin 
  if (rst)
  begin
    gen_edata_rec_reg <= 75'b0;
  end
  if (irq_elink_rec)
  begin
    gen_edata_rec_reg <= gen_edata_rec; 
  end 
  else
  begin
   gen_edata_rec_reg <= gen_edata_rec_reg; 
  end
end  




















































































































endmodule // data_gen_elink

