//
// Module mopshub_lib.data_gen_elink.struct
//
// Created:
//          by - dcs.dcs (chipdev2.physik.uni-wuppertal.de)
//          at - 18:29:30 08/18/21
//
// Generated by Mentor Graphics' HDL Designer(TM) 2019.4 (Build 4)
//

`resetall
`timescale 1ns/10ps
module data_gen_elink #(
   // synopsys template
   parameter DATA_WIDTH = 16,
   parameter max_cnt    = 11
)
( 
   // Port Declarations
   input   wire           bitCLK, 
   input   wire           bitCLKx4, 
   input   wire           genCLK, 
   input   wire           loop_en, 
   input   wire           reverse_stream_10b, 
   input   wire           rst, 
   input   wire           swap_tx_bits, 
   input   wire           tx_fifo_pfull, 
   output  wire           done, 
   output  wire           getDataTrig, 
   output  wire    [1:0]  tx_elink2bit
);


// Internal Declarations


// Local declarations

// Internal signal declarations
wire  [4:0]  addr;                                            // request to caninterface block
wire         buffer_rec_en;
wire         cs_elink;
wire  [9:0]  data_rec_10bitout;
wire  [7:0]  data_rec_8bitout;
wire  [1:0]  data_rec_delimiter;
wire         elink_delim_dbg     = 1'b1;
wire         end_write_elink;                                 // request to bridge FSM
wire  [75:0] gen_edata_76bit     = 76'hdeadbeefdeadbeefdea;
wire  [75:0] gen_edata_tra;
reg   [75:0] gen_edata_tra_reg   = 76'b0;
wire         irq_elink_rec;
wire         reset;
wire         start_write_elink;
wire  [2:0]  state_o;


// Instances 
data_gen_elink_SM DataGen( 
   .clk               (genCLK), 
   .cnt_done          (irq_elink_rec), 
   .loop_en           (loop_en), 
   .rst               (rst), 
   .tx_fifo_pfull_gen (tx_fifo_pfull), 
   .done              (done), 
   .start_write_elink (start_write_elink), 
   .state_o           (state_o)
); 

elink_interface_SM elink_interface_SM_gen( 
   .abort             (), 
   .clk               (genCLK), 
   .elink_delim_dbg   (elink_delim_dbg), 
   .fifo_data_eop     (), 
   .fifo_data_sop     (), 
   .fifo_elink_rdy    (), 
   .rst               (rst), 
   .start_write_elink (start_write_elink), 
   .timeoutrst        (), 
   .addr              (addr), 
   .buffer_elink_en   (), 
   .buffer_rec_en     (buffer_rec_en), 
   .cs_elink          (cs_elink), 
   .end_read_elink    (), 
   .end_write_elink   (end_write_elink), 
   .irq_elink_rec     (irq_elink_rec), 
   .irq_elink_tra     (), 
   .start_read_elink  (), 
   .statedeb          ()
); 

elink_proc_out_enc8b10b elink_proc_out_enc8b10b_gen( 
   .bitCLKx4           (bitCLKx4), 
   .bitCLK             (bitCLK), 
   .EDATA_IN           (data_rec_10bitout), 
   .EDATA_RDY          (cs_elink), 
   .reverse_stream_10b (reverse_stream_10b), 
   .swap_outbits       (swap_tx_bits), 
   .rst                (reset), 
   .getDataTrig        (getDataTrig), 
   .EDATA_OUT          (tx_elink2bit)
); 

fifo_to_elink fifo_to_elink_gen( 
   .fifo_wr_en  (cs_elink), 
   .bitCLKx2    (bitCLK), 
   .bitCLKx4    (bitCLKx4), 
   .rst         (reset), 
   .fifo_din    (data_rec_10bitout), 
   .efifoPfull  (), 
   .DATA1bitOUT (), 
   .elink2bit   (), 
   .fifo_flush  (reset), 
   .reverse_tx  (reverse_stream_10b), 
   .swap_output (swap_tx_bits), 
   .bitCLK      (bitCLK), 
   .fifo_wr_clk (bitCLK)
); 

rec_elink_buf rec_elink_buf_gen( 
   .data_rec_in        (gen_edata_76bit), 
   .addr               (addr), 
   .data_rec_8bitout   (data_rec_8bitout), 
   .data_rec_delimiter (data_rec_delimiter)
); 

tra_elink_buf rec_elink_buf_decoder( 
   .clk          (genCLK), 
   .data_tra_in  (data_rec_8bitout), 
   .buffer_en    (buffer_rec_en), 
   .rst          (rst), 
   .addr         (addr), 
   .data_tra_out (gen_edata_tra)
); 

// HDL Embedded Text Block 7 Data_rdy_signal1
//Save data into a buffer
assign data_rec_10bitout ={data_rec_delimiter,data_rec_8bitout}; 
assign reset = !rst;  
always@(posedge genCLK )
begin 
  if (rst)
  begin
    gen_edata_tra_reg <= 75'b0;
  end
  if (irq_elink_rec)
  begin
    gen_edata_tra_reg <= gen_edata_tra; 
  end 
  else
  begin
   gen_edata_tra_reg <= gen_edata_tra_reg; 
  end
end  



























































































































endmodule // data_gen_elink

