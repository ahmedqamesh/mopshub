//
// Module mopshub_lib.data_gen_elink.struct
//
// Created:
//          by - dcs.dcs (chipdev2.physik.uni-wuppertal.de)
//          at - 23:45:16 06/25/21
//
// Generated by Mentor Graphics' HDL Designer(TM) 2019.4 (Build 4)
//

`resetall
`timescale 1ns/10ps
module data_gen_elink #(
   // synopsys template
   parameter DATA_WIDTH = 16,
   parameter max_cnt    = 2
)
( 
   // Port Declarations
   input   wire                      clk, 
   input   wire                      loop_en, 
   input   wire                      rst, 
   input   wire                      tx_fifo_pfull, 
   output  wire    [1:0]             delimeter, 
   output  wire                      done, 
   output  wire    [DATA_WIDTH-1:0]  dout, 
   output  wire                      wr_en
);


// Internal Declarations


// Local declarations

// Internal signal declarations
wire                counter_en;
reg   [1:0]         delimeter_r   = 2'b0;
reg   [15:0]        dout_i        = 16'b0;
wire                request_trig;
wire  [max_cnt-1:0] sel_cnt;
wire  [2:0]         state_o;


// Instances 
bit_counter #(max_cnt) BitCounter( 
   .data_out (sel_cnt), 
   .enable   (counter_en), 
   .clk      (clk), 
   .rst      (rst)
); 

data_gen_elink_SM DataGen( 
   .clk               (clk), 
   .cnt_done          (request_trig), 
   .loop_en           (loop_en), 
   .rst               (rst), 
   .tx_fifo_pfull_gen (tx_fifo_pfull), 
   .counter_en        (counter_en), 
   .done              (done), 
   .state_o           (state_o), 
   .wr_en             (wr_en)
); 

// HDL Embedded Text Block 2 data_loader1
// data_loader 1
//sel din process
assign request_trig = (sel_cnt == max_cnt) ? 1:0; 
always @(posedge clk)
 begin 
  if(rst == 1 | loop_en == 1)
    case (sel_cnt)
        2'b00 : begin 
                 dout_i  <= 16'h10;
                 delimeter_r  <= 2'b10;
                end
        2'b01 : begin 
                dout_i  <= 16'hDEAD;
                delimeter_r  <= 2'b00;
                end
        2'b10 : begin 
                 dout_i  <= 16'hBEEF;
                 delimeter_r <= 2'b00;
                end
        2'b11 : begin 
                 dout_i  <=16'h01;
                 delimeter_r  <=2'b01;
                end
    endcase
  else
  begin
    dout_i <= 16'h0;
    delimeter_r  <=2'b11;
  end
end                                            












// HDL Embedded Text Block 3 Assign1
// Assign 2
//Synchronized output of the elink FIFO signals  
//always@(posedge clk_usr)
//begin
  assign dout = dout_i; 
  assign delimeter = delimeter_r;                                     
//end




endmodule // data_gen_elink

