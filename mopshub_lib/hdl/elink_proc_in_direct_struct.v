//
// Module mopshub_lib.elink_proc_in_direct.struct
//
// Created:
//          by - dcs.dcs (chipdev2.physik.uni-wuppertal.de)
//          at - 09:20:40 11/03/21
//
// Generated by Mentor Graphics' HDL Designer(TM) 2019.4 (Build 4)
//

`resetall
`timescale 1ns/10ps
module elink_proc_in_direct( 
   // Port Declarations
   input   wire    [1:0]  DATA_IN, 
   // Port Declarations
   input   wire           clk, 
   input   wire           reverse_stream_10b, 
   input   wire           rst, 
   output  wire    [7:0]  data_direct_out, 
   output  wire           data_direct_rdy
);


// Internal Declarations


// Local declarations

// Internal signal declarations
reg   [11:0] EDATAbitstreamSREG  = 12'b0;         //12 bit (2 x 5 = 10, plus 2 more)
wire  [11:0] bitstream_in;
wire         dir                 = 1;
reg   [7:0]  direct10b_data_r    = 8'b11000000;
reg          direct10b_rdy_r     = 1'b0;
reg   [1:0]  direct_inpcount_r   = 2'b00;
wire         en                  = 1;


// Instances 
bitstream_shift_register #(12,2) bitstream_deserializer00( 
   .din  (DATA_IN), 
   .clk  (clk), 
   .en   (en), 
   .dir  (dir), 
   .rst  (rst), 
   .dout (bitstream_in)
); 

// HDL Embedded Text Block 13 eb6
always@(posedge clk)
if (!rst)
    EDATAbitstreamSREG <=0;
else
    EDATAbitstreamSREG <= bitstream_in;














// HDL Embedded Text Block 17 direct_data3
assign data_direct_rdy  = direct10b_rdy_r;
assign data_direct_out   = direct10b_data_r;
//-------------------------------------------------------------------------------------------
//-- at this stage: word10b and word10b_rdy are aligned @ bitCLK
//-------------------------------------------------------------------------------------------
always@(posedge clk)
begin
    if (!rst)
    begin
        direct_inpcount_r  <= 2'b0;
        direct10b_rdy_r    <= 1'b0;
        direct10b_data_r   <= 8'b00000000;
    end
else
  begin
      if (direct_inpcount_r == 2'b11)
      begin
          direct10b_rdy_r <= 1'b1;
          //-- LSB send first 
          if (reverse_stream_10b == 1'b0)
              direct10b_data_r   <= EDATAbitstreamSREG[7:0];
         // -- MSB send first 
          else
            direct10b_data_r <= {EDATAbitstreamSREG[0],EDATAbitstreamSREG[1],EDATAbitstreamSREG[2],EDATAbitstreamSREG[3],EDATAbitstreamSREG[4],EDATAbitstreamSREG[5],EDATAbitstreamSREG[6],EDATAbitstreamSREG[7]};
      end
      else
      begin
        direct10b_rdy_r   <= 1'b0;
        direct_inpcount_r <= direct_inpcount_r + 1; 
      end
  end
end












endmodule // elink_proc_in_direct

