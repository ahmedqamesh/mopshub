//
// Module mopshub_lib.elink_proc_out_direct.struct
//
// Created:
//          by - dcs.dcs (chipdev2.physik.uni-wuppertal.de)
//          at - 13:30:42 02/03/22
//
// Generated by Mentor Graphics' HDL Designer(TM) 2019.4 (Build 4)
//

`resetall
`timescale 1ns/10ps
module elink_proc_out_direct( 
   // Port Declarations
   input   wire    [9:0]  EDATA_IN, 
   // Port Declarations
   input   wire           clk, 
   input   wire           rst, 
   output  wire    [1:0]  EDATA_OUT, 
   output  wire           get_data_trig
);


// Internal Declarations


// Local declarations

// Internal signal declarations
reg  [7:0] byte_r;
reg  [1:0] send_count  = 0;


// Instances 
mux4_Nbit #(2) mux4_Nbit5( 
   .data0    (byte_r[1:0]), 
   .data1    (byte_r[3:2]), 
   .data2    (byte_r[5:4]), 
   .data3    (byte_r[7:6]), 
   .sel      (send_count), 
   .data_out (EDATA_OUT)
); 

triger_counter #(3'b011,3'b011) triger_counter1( 
   .rst          (rst), 
   .clk          (clk), 
   .request_trig (get_data_trig)
); 

// HDL Embedded Text Block 1 eb1
 
//-------------------------------------------------------------------------------------------
//-- sending out 2 bits @ bitCLK using a MUX
//-------------------------------------------------------------------------------------------                        
always @(posedge clk)
begin
  if (!rst)
  byte_r <= 8'b0;
  else if (get_data_trig  == 1) //Trigger after cycle 5 CLKs
  begin
    byte_r <= EDATA_IN;
  end
end


//-------------------------------------------------------------------------------------------
//-- sending out 2 bits @ bitCLK using a MUX
//-------------------------------------------------------------------------------------------
// Counter over the select signal
always @(posedge clk)
begin
  if (!rst)
  send_count <= 2'b0;
  else
  begin
    if (get_data_trig == 1)
    send_count <= 2'b0;
    else  
    send_count <= send_count + 1;
  end
end                                   




endmodule // elink_proc_out_direct

