/****************************************************************************************************
 *                          ! THIS FILE WAS AUTO-GENERATED BY TMRG TOOL !                           *
 *                                   ! DO NOT EDIT IT MANUALLY !                                    *
 *                                                                                                  *
 * file    : ./output/reset_mac2TMR.v                                                               *
 *                                                                                                  *
 * user    : lucas                                                                                  *
 * host    : DESKTOP-BFDSFP2                                                                        *
 * date    : 06/10/2022 13:53:02                                                                    *
 *                                                                                                  *
 * workdir : /mnt/c/Users/Lucas/Documents/GitHub/mopshub_triplicated/triplicated/mopshub_top_board/hdl *
 * cmd     : /mnt/c/Users/Lucas/Desktop/mopshub_triplication/tmrg-master/bin/tmrg -vv -c tmrg.cfg   *
 * tmrg rev:                                                                                        *
 *                                                                                                  *
 * src file: reset_mac2.v                                                                           *
 *           Git SHA           : c110441b08b692cc54ebd4a3b84a2599430e8f93                           *
 *           Modification time : 2022-08-25 11:46:40                                                *
 *           File Size         : 2425                                                               *
 *           MD5 hash          : 4554f163a45a2e176eb1eda0480366a5                                   *
 *                                                                                                  *
 ****************************************************************************************************/

module reset_mac2TMR(
  input wire  reset ,
  input wire  clock ,
  input wire  prescaler ,
  output wire  sync_reset 
);
wire resetC;
wire resetB;
wire resetA;
wire prescalerC;
wire prescalerB;
wire prescalerA;
wire [1:0] countVC;
wire [1:0] countVB;
wire [1:0] countVA;
wire clockC;
wire clockB;
wire clockA;
wire activeVC;
wire activeVB;
wire activeVA;
wor countTmrError;
wire [1:0] count;
wor activeTmrError;
wire active;
reg  [1:0] countA ;
reg  [1:0] countB ;
reg  [1:0] countC ;
reg  activeA ;
reg  activeB ;
reg  activeC ;
wire [1:0] countV =  count;
wire activeV =  active;
assign sync_reset =  reset&(~ activeV );

always @( posedge clockA or negedge resetA )
  begin
    if (resetA==1'b0)
      begin
        activeA <= 1'b1;
        countA <= 2'd0;
      end
    else
      begin
        countA <= countVA;
        activeA <= activeVA;
        if (prescalerA==1'b1)
          if (activeVA==1'b1)
            if (countVA==2'd3)
              activeA <= 1'b0;
            else
              countA <= countVA+2'd1;
      end
  end

always @( posedge clockB or negedge resetB )
  begin
    if (resetB==1'b0)
      begin
        activeB <= 1'b1;
        countB <= 2'd0;
      end
    else
      begin
        countB <= countVB;
        activeB <= activeVB;
        if (prescalerB==1'b1)
          if (activeVB==1'b1)
            if (countVB==2'd3)
              activeB <= 1'b0;
            else
              countB <= countVB+2'd1;
      end
  end

always @( posedge clockC or negedge resetC )
  begin
    if (resetC==1'b0)
      begin
        activeC <= 1'b1;
        countC <= 2'd0;
      end
    else
      begin
        countC <= countVC;
        activeC <= activeVC;
        if (prescalerC==1'b1)
          if (activeVC==1'b1)
            if (countVC==2'd3)
              activeC <= 1'b0;
            else
              countC <= countVC+2'd1;
      end
  end

majorityVoter activeVoter (
    .inA(activeA),
    .inB(activeB),
    .inC(activeC),
    .out(active),
    .tmrErr(activeTmrError)
    );

majorityVoter #(.WIDTH(2)) countVoter (
    .inA(countA),
    .inB(countB),
    .inC(countC),
    .out(count),
    .tmrErr(countTmrError)
    );

fanout activeVFanout (
    .in(activeV),
    .outA(activeVA),
    .outB(activeVB),
    .outC(activeVC)
    );

fanout clockFanout (
    .in(clock),
    .outA(clockA),
    .outB(clockB),
    .outC(clockC)
    );

fanout #(.WIDTH(2)) countVFanout (
    .in(countV),
    .outA(countVA),
    .outB(countVB),
    .outC(countVC)
    );

fanout prescalerFanout (
    .in(prescaler),
    .outA(prescalerA),
    .outB(prescalerB),
    .outC(prescalerC)
    );

fanout resetFanout (
    .in(reset),
    .outA(resetA),
    .outB(resetB),
    .outC(resetC)
    );
endmodule

