//
// Module mopshub_testbench.data_generator_sm.fsm
//
// Created:
//          by - dcs.dcs (chipdev2.physik.uni-wuppertal.de)
//          at - 12:59:32 08/04/23
//
// Generated by Mentor Graphics' HDL Designer(TM) 2019.4 (Build 4)
//
`resetall
`timescale 1ns/10ps
module data_generator_sm( 
   // Port Declarations
   // Port Declarations
   // Port Declarations
   // Port Declarations
   // Port Declarations
   // Port Declarations
   // Port Declarations
   input   wire               clk,                       // write FIFO clk
   input   wire               rst,                       // should be used through VIO
   input   wire       [7:0]   counter8bit_limit, 
   output  reg                irq_elink_tra,             //  ena signal
   input   wire               start_read_elink, 
   output  reg                end_read_elink, 
   input   wire               cnt_msg_done, 
   output  reg                buffer_en, 
   output  integer            ch, 
   output  reg                custommsg,                 // To start a custom message
   output  reg        [63:0]  data,                      // Complete 8 bytes of data to be sent in a custom message
   output  reg                start,                     // To start Driver /generator
   output  reg                reqmsg,                    // Indicates a sent request to the testbench
   output  reg                respmsg,                   // Indicates a reponse from the MOPS chip 
   output  reg        [23:0]  indexsubindex,             // Value of index should be LSByte first 
   output  reg                read,                      // Prepare SDO read request
   output  reg        [31:0]  taildata,                  // Data which must be written to the chip 
   output  reg                write,                     // Prepare SDO write request
   output  reg                readadc,                   // indicates to read an ADC channel 
   output  reg        [10:0]  customcanid,               // ID to be sent in a custom message
   input   wire               test_rx, 
   output  reg                test_rx_start, 
   output  reg                test_rx_end, 
   input   wire               start_data_gen,            // This dignal should start the SM and comes from TB
   input   wire               test_mopshub_core, 
   input   wire               sel_bus, 
   output  reg                test_elink_data_done,      // dbg
   output  reg                start_write_emulator, 
   input   wire               test_tx, 
   input   wire               end_write_emulator, 
   output  reg                test_tx_end, 
   output  reg                test_tx_start, 
   output  reg                test_advanced_start, 
   output  reg                test_advanced_end, 
   input   wire               tx_mopshub, 
   input   wire               rx_mopshub, 
   input   wire               test_advanced, 
   output  reg        [75:0]  rand_rec_in, 
   output  reg                start_write_emulator_spi, 
   input   wire               end_write_emulator_spi, 
   output  reg                test_simult, 
   output  reg                no_respmsg, 
   output  reg        [75:0]  requestreg, 
   output  reg        [75:0]  responsereg, 
   input   wire       [75:0]  data_rec_uplink, 
   input   wire       [75:0]  data_tra_downlink, 
   input   wire       [75:0]  data_tra_decoder, 
   output  reg                random1000, 
   output  reg                sendran, 
   output  reg                nextran, 
   input   wire               doneran, 
   output  reg        [7:0]   counter8bit_reg, 
   input   wire       [4:0]   n_buses, 
   input   wire               txdec
);


// Internal Declarations


// Declare any pre-registered internal signals
reg [75:0] requestreg_cld;
reg [75:0] responsereg_cld;
reg [7:0]  counter8bit_reg_cld;

// Module Declarations

// State encoding
parameter 
          ST_Reset          = 8'd0,
          ST_WAIT           = 8'd1,
          READ65            = 8'd2,
          ACK133            = 8'd3,
          REQMSGWAIT67      = 8'd4,
          RESPMSGWAIT66     = 8'd5,
          REQMSG67          = 8'd6,
          READ66            = 8'd7,
          ACK135            = 8'd8,
          REQMSGWAIT68      = 8'd9,
          RESPMSGWAIT67     = 8'd10,
          REQMSG68          = 8'd11,
          READ67            = 8'd12,
          ACK137            = 8'd13,
          REQMSGWAIT69      = 8'd14,
          RESPMSGWAIT68     = 8'd15,
          REQMSG69          = 8'd16,
          RESPMSG68         = 8'd17,
          END_ADC           = 8'd18,
          START_ADC         = 8'd19,
          ST_Done           = 8'd20,
          ST_Done_Wait      = 8'd21,
          ST_Loop_cnt       = 8'd22,
          ST_Loop_cnt1      = 8'd23,
          ST_Rst_Cnt1       = 8'd24,
          ST_Rst_Cnt2       = 8'd25,
          ST_counter_Wait1  = 8'd26,
          ST_Done1          = 8'd27,
          ST_Loop_cnt2      = 8'd28,
          ST_Rst_Cnt3       = 8'd29,
          ST_test_tx_end    = 8'd30,
          ST_En_Buffer1     = 8'd31,
          ST_End_Read1      = 8'd32,
          REQMSG5           = 8'd33,
          RESPMSGWAIT85     = 8'd34,
          ST_Wait_Suc_Rec1  = 8'd35,
          RESPMSG5          = 8'd36,
          ST_Bus_cnt2       = 8'd37,
          ST_start_test     = 8'd38,
          ST_Enable_Data9   = 8'd39,
          ST_Wait_Suc_Tra10 = 8'd40,
          REQMSG15          = 8'd41,
          ST_Wait_Suc_Rec10 = 8'd42,
          RESPMSGWAIT87     = 8'd43,
          ST_Enable_Data10  = 8'd44,
          ST_Wait_Suc_Tra11 = 8'd45,
          REQMSG16          = 8'd46,
          ST_Wait_Suc_Rec11 = 8'd47,
          RESPMSGWAIT88     = 8'd48,
          ST_Enable_Data11  = 8'd49,
          ST_Wait_Suc_Tra12 = 8'd50,
          REQMSG17          = 8'd51,
          ST_Wait_Suc_Rec12 = 8'd52,
          RESPMSGWAIT89     = 8'd53,
          ST_Wait_Suc_Tra14 = 8'd54,
          ST_Done_Wait15    = 8'd55,
          ST_En_Buffer3     = 8'd56,
          ST_End_Read3      = 8'd57,
          REQMSG20          = 8'd58,
          RESPMSGWAIT92     = 8'd59,
          ST_Wait_Suc_Rec15 = 8'd60,
          RESPMSG20         = 8'd61,
          ST_Bus_cnt4       = 8'd62,
          ST_start_test2    = 8'd63,
          ST_Wait_Suc_Tra16 = 8'd64,
          ST_Done_Wait17    = 8'd65,
          ST_En_Buffer4     = 8'd66,
          ST_End_Read4      = 8'd67,
          REQMSG21          = 8'd68,
          RESPMSGWAIT93     = 8'd69,
          ST_Wait_Suc_Rec16 = 8'd70,
          RESPMSG21         = 8'd71,
          ST_Bus_cnt5       = 8'd72,
          ST_start_test3    = 8'd73,
          ST_Wait_Suc_Tra17 = 8'd74,
          ST_Done_Wait18    = 8'd75,
          Start1            = 8'd76,
          end_rand1         = 8'd77,
          _Wait3            = 8'd78,
          ST_Enable_Data14  = 8'd79,
          ST_Wait_Suc_Tra19 = 8'd80,
          REQMSG23          = 8'd81,
          ST_Wait_Suc_Rec18 = 8'd82,
          RESPMSG23         = 8'd83,
          RESPMSGWAIT95     = 8'd84,
          ST_Done_Wait20    = 8'd85,
          _Wait7            = 8'd86,
          READ68            = 8'd87,
          READ69            = 8'd88,
          READ74            = 8'd89,
          ACK151            = 8'd90,
          ACK152            = 8'd91,
          RESPMSGWAIT80     = 8'd92,
          REQMSG76          = 8'd93,
          RESPMSG75         = 8'd94,
          _Wait5            = 8'd95,
          _Wait8            = 8'd96,
          ST_Enable_Data16  = 8'd97,
          ST_Wait_Suc_Tra21 = 8'd98,
          REQMSG25          = 8'd99,
          ST_Wait_Suc_Rec20 = 8'd100,
          RESPMSG25         = 8'd101,
          RESPMSGWAIT97     = 8'd102,
          ST_Done_Wait22    = 8'd103,
          _Wait10           = 8'd104,
          s3                = 8'd105,
          s4                = 8'd106,
          _Wait6            = 8'd107,
          _Wait11           = 8'd108,
          s7                = 8'd109,
          s8                = 8'd110,
          s9                = 8'd111,
          s0                = 8'd112,
          s12               = 8'd113,
          s13               = 8'd114,
          s14               = 8'd115,
          s1                = 8'd116,
          ST_Loop_cnt6      = 8'd117,
          READ73            = 8'd118,
          ST_loop1          = 8'd119,
          s15               = 8'd120,
          ST_Rst_Cnt7       = 8'd121,
          s16               = 8'd122,
          s18               = 8'd123,
          s26               = 8'd124,
          DEFRAN            = 8'd125,
          READ4             = 8'd126,
          REQMSGWAIT8       = 8'd127,
          NXTRAN            = 8'd128,
          REQMSG8           = 8'd129,
          ACK12             = 8'd130,
          ACK11             = 8'd131,
          RESPMSG69         = 8'd132,
          s23               = 8'd133,
          s22               = 8'd134,
          RESPMSG70         = 8'd135,
          RESPMSG74         = 8'd136,
          s28               = 8'd137,
          RESPMSG72         = 8'd138,
          s27               = 8'd139,
          RESPMSG71         = 8'd140,
          s25               = 8'd141,
          RESPMSG76         = 8'd142,
          s24               = 8'd143,
          RESPMSG77         = 8'd144,
          ACK148            = 8'd145,
          s10               = 8'd146,
          ACK13             = 8'd147;

reg [7:0] current_state, next_state;

// Wait State Signals
reg [16:0] csm_timer;
reg [16:0] csm_next_timer;
reg        csm_timeout;
reg        csm_to_READ65;
reg        csm_to_ACK133;
reg        csm_to_REQMSGWAIT67;
reg        csm_to_RESPMSGWAIT66;
reg        csm_to_READ66;
reg        csm_to_ACK135;
reg        csm_to_REQMSGWAIT68;
reg        csm_to_RESPMSGWAIT67;
reg        csm_to_READ67;
reg        csm_to_ACK137;
reg        csm_to_REQMSGWAIT69;
reg        csm_to_RESPMSGWAIT68;
reg        csm_to_ST_Done_Wait;
reg        csm_to_ST_counter_Wait1;
reg        csm_to_RESPMSGWAIT85;
reg        csm_to_ST_Wait_Suc_Rec1;
reg        csm_to_ST_Wait_Suc_Tra10;
reg        csm_to_ST_Wait_Suc_Rec10;
reg        csm_to_RESPMSGWAIT87;
reg        csm_to_ST_Wait_Suc_Tra11;
reg        csm_to_ST_Wait_Suc_Rec11;
reg        csm_to_RESPMSGWAIT88;
reg        csm_to_ST_Wait_Suc_Tra12;
reg        csm_to_ST_Wait_Suc_Rec12;
reg        csm_to_RESPMSGWAIT89;
reg        csm_to_ST_Wait_Suc_Tra14;
reg        csm_to_ST_Done_Wait15;
reg        csm_to_RESPMSGWAIT92;
reg        csm_to_ST_Wait_Suc_Rec15;
reg        csm_to_ST_Wait_Suc_Tra16;
reg        csm_to_ST_Done_Wait17;
reg        csm_to_RESPMSGWAIT93;
reg        csm_to_ST_Wait_Suc_Rec16;
reg        csm_to_ST_Wait_Suc_Tra17;
reg        csm_to_ST_Done_Wait18;
reg        csm_to__Wait3;
reg        csm_to_ST_Wait_Suc_Tra19;
reg        csm_to_ST_Wait_Suc_Rec18;
reg        csm_to_RESPMSGWAIT95;
reg        csm_to_ST_Done_Wait20;
reg        csm_to__Wait7;
reg        csm_to_READ69;
reg        csm_to_READ74;
reg        csm_to_ACK152;
reg        csm_to_RESPMSGWAIT80;
reg        csm_to__Wait5;
reg        csm_to__Wait8;
reg        csm_to_ST_Wait_Suc_Tra21;
reg        csm_to_ST_Wait_Suc_Rec20;
reg        csm_to_RESPMSGWAIT97;
reg        csm_to_ST_Done_Wait22;
reg        csm_to__Wait10;
reg        csm_to_s3;
reg        csm_to_s4;
reg        csm_to__Wait6;
reg        csm_to__Wait11;
reg        csm_to_s7;
reg        csm_to_s8;
reg        csm_to_s9;
reg        csm_to_s12;
reg        csm_to_s13;
reg        csm_to_s1;
reg        csm_to_s16;
reg        csm_to_s18;
reg        csm_to_s26;
reg        csm_to_DEFRAN;
reg        csm_to_READ4;
reg        csm_to_REQMSGWAIT8;
reg        csm_to_ACK11;
reg        csm_to_s23;
reg        csm_to_s22;
reg        csm_to_s28;
reg        csm_to_s27;
reg        csm_to_s25;
reg        csm_to_s10;
reg        csm_to_ACK13;

//-----------------------------------------------------------------
// Next State Block for machine csm
//-----------------------------------------------------------------
always @(
   counter8bit_limit, 
   counter8bit_reg_cld, 
   csm_timeout, 
   current_state, 
   doneran, 
   end_write_emulator, 
   end_write_emulator_spi, 
   n_buses, 
   sel_bus, 
   start_data_gen, 
   start_read_elink, 
   test_advanced, 
   test_mopshub_core, 
   test_rx, 
   test_tx, 
   tx_mopshub, 
   txdec
)
begin : next_state_block_proc
   // Default assignments to Wait State entry flags
   csm_to_READ65 = 1'b0;
   csm_to_ACK133 = 1'b0;
   csm_to_REQMSGWAIT67 = 1'b0;
   csm_to_RESPMSGWAIT66 = 1'b0;
   csm_to_READ66 = 1'b0;
   csm_to_ACK135 = 1'b0;
   csm_to_REQMSGWAIT68 = 1'b0;
   csm_to_RESPMSGWAIT67 = 1'b0;
   csm_to_READ67 = 1'b0;
   csm_to_ACK137 = 1'b0;
   csm_to_REQMSGWAIT69 = 1'b0;
   csm_to_RESPMSGWAIT68 = 1'b0;
   csm_to_ST_Done_Wait = 1'b0;
   csm_to_ST_counter_Wait1 = 1'b0;
   csm_to_RESPMSGWAIT85 = 1'b0;
   csm_to_ST_Wait_Suc_Rec1 = 1'b0;
   csm_to_ST_Wait_Suc_Tra10 = 1'b0;
   csm_to_ST_Wait_Suc_Rec10 = 1'b0;
   csm_to_RESPMSGWAIT87 = 1'b0;
   csm_to_ST_Wait_Suc_Tra11 = 1'b0;
   csm_to_ST_Wait_Suc_Rec11 = 1'b0;
   csm_to_RESPMSGWAIT88 = 1'b0;
   csm_to_ST_Wait_Suc_Tra12 = 1'b0;
   csm_to_ST_Wait_Suc_Rec12 = 1'b0;
   csm_to_RESPMSGWAIT89 = 1'b0;
   csm_to_ST_Wait_Suc_Tra14 = 1'b0;
   csm_to_ST_Done_Wait15 = 1'b0;
   csm_to_RESPMSGWAIT92 = 1'b0;
   csm_to_ST_Wait_Suc_Rec15 = 1'b0;
   csm_to_ST_Wait_Suc_Tra16 = 1'b0;
   csm_to_ST_Done_Wait17 = 1'b0;
   csm_to_RESPMSGWAIT93 = 1'b0;
   csm_to_ST_Wait_Suc_Rec16 = 1'b0;
   csm_to_ST_Wait_Suc_Tra17 = 1'b0;
   csm_to_ST_Done_Wait18 = 1'b0;
   csm_to__Wait3 = 1'b0;
   csm_to_ST_Wait_Suc_Tra19 = 1'b0;
   csm_to_ST_Wait_Suc_Rec18 = 1'b0;
   csm_to_RESPMSGWAIT95 = 1'b0;
   csm_to_ST_Done_Wait20 = 1'b0;
   csm_to__Wait7 = 1'b0;
   csm_to_READ69 = 1'b0;
   csm_to_READ74 = 1'b0;
   csm_to_ACK152 = 1'b0;
   csm_to_RESPMSGWAIT80 = 1'b0;
   csm_to__Wait5 = 1'b0;
   csm_to__Wait8 = 1'b0;
   csm_to_ST_Wait_Suc_Tra21 = 1'b0;
   csm_to_ST_Wait_Suc_Rec20 = 1'b0;
   csm_to_RESPMSGWAIT97 = 1'b0;
   csm_to_ST_Done_Wait22 = 1'b0;
   csm_to__Wait10 = 1'b0;
   csm_to_s3 = 1'b0;
   csm_to_s4 = 1'b0;
   csm_to__Wait6 = 1'b0;
   csm_to__Wait11 = 1'b0;
   csm_to_s7 = 1'b0;
   csm_to_s8 = 1'b0;
   csm_to_s9 = 1'b0;
   csm_to_s12 = 1'b0;
   csm_to_s13 = 1'b0;
   csm_to_s1 = 1'b0;
   csm_to_s16 = 1'b0;
   csm_to_s18 = 1'b0;
   csm_to_s26 = 1'b0;
   csm_to_DEFRAN = 1'b0;
   csm_to_READ4 = 1'b0;
   csm_to_REQMSGWAIT8 = 1'b0;
   csm_to_ACK11 = 1'b0;
   csm_to_s23 = 1'b0;
   csm_to_s22 = 1'b0;
   csm_to_s28 = 1'b0;
   csm_to_s27 = 1'b0;
   csm_to_s25 = 1'b0;
   csm_to_s10 = 1'b0;
   csm_to_ACK13 = 1'b0;
   case (current_state) 
      ST_Reset: begin
         if (start_data_gen == 1) begin
            next_state = _Wait11;
            csm_to__Wait11 = 1'b1;
         end
         else
            next_state = ST_Reset;
      end
      ST_WAIT: begin
         if (test_rx ==1) begin
            next_state = _Wait3;
            csm_to__Wait3 = 1'b1;
         end
         else if (test_tx ==1) begin
            next_state = _Wait6;
            csm_to__Wait6 = 1'b1;
         end
         else if (test_mopshub_core ==1)
            next_state = ST_start_test;
         else if (test_advanced ==1) begin
            next_state = _Wait8;
            csm_to__Wait8 = 1'b1;
         end
         else
            next_state = ST_WAIT;
      end
      READ65: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = REQMSGWAIT67;
            csm_to_REQMSGWAIT67 = 1'b1;
         end
         else
            next_state = READ65;
      end
      ACK133: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = RESPMSGWAIT66;
            csm_to_RESPMSGWAIT66 = 1'b1;
         end
         else
            next_state = ACK133;
      end
      REQMSGWAIT67: begin
         if (csm_timeout)
            next_state = REQMSG67;
         else
            next_state = REQMSGWAIT67;
      end
      RESPMSGWAIT66: begin
         if (csm_timeout)
            next_state = RESPMSG70;
         else
            next_state = RESPMSGWAIT66;
      end
      REQMSG67: begin
         next_state = ACK133;
         csm_to_ACK133 = 1'b1;
      end
      READ66: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = REQMSGWAIT68;
            csm_to_REQMSGWAIT68 = 1'b1;
         end
         else
            next_state = READ66;
      end
      ACK135: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = RESPMSGWAIT67;
            csm_to_RESPMSGWAIT67 = 1'b1;
         end
         else
            next_state = ACK135;
      end
      REQMSGWAIT68: begin
         if (csm_timeout)
            next_state = REQMSG68;
         else
            next_state = REQMSGWAIT68;
      end
      RESPMSGWAIT67: begin
         if (csm_timeout)
            next_state = RESPMSG69;
         else
            next_state = RESPMSGWAIT67;
      end
      REQMSG68: begin
         next_state = ACK135;
         csm_to_ACK135 = 1'b1;
      end
      READ67: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = REQMSGWAIT69;
            csm_to_REQMSGWAIT69 = 1'b1;
         end
         else
            next_state = READ67;
      end
      ACK137: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = RESPMSGWAIT68;
            csm_to_RESPMSGWAIT68 = 1'b1;
         end
         else
            next_state = ACK137;
      end
      REQMSGWAIT69: begin
         if (csm_timeout)
            next_state = REQMSG69;
         else
            next_state = REQMSGWAIT69;
      end
      RESPMSGWAIT68: begin
         if (csm_timeout)
            next_state = RESPMSG68;
         else
            next_state = RESPMSGWAIT68;
      end
      REQMSG69: begin
         next_state = ACK137;
         csm_to_ACK137 = 1'b1;
      end
      RESPMSG68: begin
         next_state = s22;
         csm_to_s22 = 1'b1;
      end
      END_ADC: begin
         next_state = ST_WAIT;
      end
      START_ADC: begin
         next_state = READ65;
         csm_to_READ65 = 1'b1;
      end
      ST_Done: begin
         next_state = ST_WAIT;
      end
      ST_Done_Wait: begin
         if (sel_bus ==1 ||  counter8bit_reg_cld =={3'b0,n_buses})
            next_state = ST_Rst_Cnt2;
         else
            next_state = ST_Loop_cnt;
      end
      ST_Loop_cnt: begin
         next_state = ST_counter_Wait1;
         csm_to_ST_counter_Wait1 = 1'b1;
      end
      ST_Loop_cnt1: begin
         next_state = _Wait3;
         csm_to__Wait3 = 1'b1;
      end
      ST_Rst_Cnt1: begin
         next_state = END_ADC;
      end
      ST_Rst_Cnt2: begin
         next_state = ST_Done;
      end
      ST_counter_Wait1: begin
         if (csm_timeout)
            next_state = ST_start_test;
         else
            next_state = ST_counter_Wait1;
      end
      ST_Done1: begin
         next_state = ST_WAIT;
      end
      ST_Loop_cnt2: begin
         next_state = _Wait6;
         csm_to__Wait6 = 1'b1;
      end
      ST_Rst_Cnt3: begin
         next_state = ST_Done1;
      end
      ST_test_tx_end: begin
         next_state = ST_Enable_Data11;
      end
      ST_En_Buffer1: begin
         next_state = ST_End_Read1;
      end
      ST_End_Read1: begin
         next_state = ST_Wait_Suc_Tra14;
         csm_to_ST_Wait_Suc_Tra14 = 1'b1;
      end
      REQMSG5: begin
         next_state = ST_Wait_Suc_Rec1;
         csm_to_ST_Wait_Suc_Rec1 = 1'b1;
      end
      RESPMSGWAIT85: begin
         if (csm_timeout)
            next_state = RESPMSG5;
         else
            next_state = RESPMSGWAIT85;
      end
      ST_Wait_Suc_Rec1: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = RESPMSGWAIT85;
            csm_to_RESPMSGWAIT85 = 1'b1;
         end
         else
            next_state = ST_Wait_Suc_Rec1;
      end
      RESPMSG5: begin
         next_state = ST_Done_Wait15;
         csm_to_ST_Done_Wait15 = 1'b1;
      end
      ST_Bus_cnt2: begin
         next_state = ST_En_Buffer1;
      end
      ST_start_test: begin
         if (start_read_elink ==1)
            next_state = ST_Bus_cnt2;
         else
            next_state = ST_start_test;
      end
      ST_Enable_Data9: begin
         if (end_write_emulator ==1) begin
            next_state = ST_Wait_Suc_Tra10;
            csm_to_ST_Wait_Suc_Tra10 = 1'b1;
         end
         else
            next_state = ST_Enable_Data9;
      end
      ST_Wait_Suc_Tra10: begin
         if (csm_timeout)
            next_state = REQMSG15;
         else
            next_state = ST_Wait_Suc_Tra10;
      end
      REQMSG15: begin
         next_state = ST_Wait_Suc_Rec10;
         csm_to_ST_Wait_Suc_Rec10 = 1'b1;
      end
      ST_Wait_Suc_Rec10: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = RESPMSGWAIT87;
            csm_to_RESPMSGWAIT87 = 1'b1;
         end
         else
            next_state = ST_Wait_Suc_Rec10;
      end
      RESPMSGWAIT87: begin
         if (csm_timeout)
            next_state = RESPMSG74;
         else
            next_state = RESPMSGWAIT87;
      end
      ST_Enable_Data10: begin
         if (end_write_emulator ==1) begin
            next_state = ST_Wait_Suc_Tra11;
            csm_to_ST_Wait_Suc_Tra11 = 1'b1;
         end
         else
            next_state = ST_Enable_Data10;
      end
      ST_Wait_Suc_Tra11: begin
         if (csm_timeout)
            next_state = REQMSG16;
         else
            next_state = ST_Wait_Suc_Tra11;
      end
      REQMSG16: begin
         next_state = ST_Wait_Suc_Rec11;
         csm_to_ST_Wait_Suc_Rec11 = 1'b1;
      end
      ST_Wait_Suc_Rec11: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = RESPMSGWAIT88;
            csm_to_RESPMSGWAIT88 = 1'b1;
         end
         else
            next_state = ST_Wait_Suc_Rec11;
      end
      RESPMSGWAIT88: begin
         if (csm_timeout)
            next_state = RESPMSG72;
         else
            next_state = RESPMSGWAIT88;
      end
      ST_Enable_Data11: begin
         if (end_write_emulator ==1) begin
            next_state = ST_Wait_Suc_Tra12;
            csm_to_ST_Wait_Suc_Tra12 = 1'b1;
         end
         else
            next_state = ST_Enable_Data11;
      end
      ST_Wait_Suc_Tra12: begin
         if (csm_timeout)
            next_state = REQMSG17;
         else
            next_state = ST_Wait_Suc_Tra12;
      end
      REQMSG17: begin
         next_state = ST_Wait_Suc_Rec12;
         csm_to_ST_Wait_Suc_Rec12 = 1'b1;
      end
      ST_Wait_Suc_Rec12: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = RESPMSGWAIT89;
            csm_to_RESPMSGWAIT89 = 1'b1;
         end
         else
            next_state = ST_Wait_Suc_Rec12;
      end
      RESPMSGWAIT89: begin
         if (csm_timeout)
            next_state = RESPMSG71;
         else
            next_state = RESPMSGWAIT89;
      end
      ST_Wait_Suc_Tra14: begin
         if (csm_timeout)
            next_state = REQMSG5;
         else
            next_state = ST_Wait_Suc_Tra14;
      end
      ST_Done_Wait15: begin
         next_state = ST_start_test2;
      end
      ST_En_Buffer3: begin
         next_state = ST_End_Read3;
      end
      ST_End_Read3: begin
         next_state = ST_Wait_Suc_Tra16;
         csm_to_ST_Wait_Suc_Tra16 = 1'b1;
      end
      REQMSG20: begin
         next_state = ST_Wait_Suc_Rec15;
         csm_to_ST_Wait_Suc_Rec15 = 1'b1;
      end
      RESPMSGWAIT92: begin
         if (csm_timeout)
            next_state = RESPMSG20;
         else
            next_state = RESPMSGWAIT92;
      end
      ST_Wait_Suc_Rec15: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = RESPMSGWAIT92;
            csm_to_RESPMSGWAIT92 = 1'b1;
         end
         else
            next_state = ST_Wait_Suc_Rec15;
      end
      RESPMSG20: begin
         next_state = ST_Done_Wait17;
         csm_to_ST_Done_Wait17 = 1'b1;
      end
      ST_Bus_cnt4: begin
         next_state = ST_En_Buffer3;
      end
      ST_start_test2: begin
         if (start_read_elink ==1)
            next_state = ST_Bus_cnt4;
         else
            next_state = ST_start_test2;
      end
      ST_Wait_Suc_Tra16: begin
         if (csm_timeout)
            next_state = REQMSG20;
         else
            next_state = ST_Wait_Suc_Tra16;
      end
      ST_Done_Wait17: begin
         next_state = ST_start_test3;
      end
      ST_En_Buffer4: begin
         next_state = ST_End_Read4;
      end
      ST_End_Read4: begin
         next_state = ST_Wait_Suc_Tra17;
         csm_to_ST_Wait_Suc_Tra17 = 1'b1;
      end
      REQMSG21: begin
         next_state = ST_Wait_Suc_Rec16;
         csm_to_ST_Wait_Suc_Rec16 = 1'b1;
      end
      RESPMSGWAIT93: begin
         if (csm_timeout)
            next_state = RESPMSG21;
         else
            next_state = RESPMSGWAIT93;
      end
      ST_Wait_Suc_Rec16: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = RESPMSGWAIT93;
            csm_to_RESPMSGWAIT93 = 1'b1;
         end
         else
            next_state = ST_Wait_Suc_Rec16;
      end
      RESPMSG21: begin
         next_state = ST_Done_Wait18;
         csm_to_ST_Done_Wait18 = 1'b1;
      end
      ST_Bus_cnt5: begin
         next_state = ST_En_Buffer4;
      end
      ST_start_test3: begin
         if (start_read_elink ==1)
            next_state = ST_Bus_cnt5;
         else
            next_state = ST_start_test3;
      end
      ST_Wait_Suc_Tra17: begin
         if (csm_timeout)
            next_state = REQMSG21;
         else
            next_state = ST_Wait_Suc_Tra17;
      end
      ST_Done_Wait18: begin
         next_state = ST_Done_Wait;
         csm_to_ST_Done_Wait = 1'b1;
      end
      Start1: begin
         next_state = s10;
         csm_to_s10 = 1'b1;
      end
      end_rand1: begin
         next_state = ST_WAIT;
      end
      _Wait3: begin
         if (csm_timeout)
            next_state = START_ADC;
         else
            next_state = _Wait3;
      end
      ST_Enable_Data14: begin
         if (end_write_emulator_spi ==1) begin
            next_state = ST_Wait_Suc_Tra19;
            csm_to_ST_Wait_Suc_Tra19 = 1'b1;
         end
         else
            next_state = ST_Enable_Data14;
      end
      ST_Wait_Suc_Tra19: begin
         if (csm_timeout)
            next_state = REQMSG23;
         else
            next_state = ST_Wait_Suc_Tra19;
      end
      REQMSG23: begin
         next_state = ST_Wait_Suc_Rec18;
         csm_to_ST_Wait_Suc_Rec18 = 1'b1;
      end
      ST_Wait_Suc_Rec18: begin
         if (csm_timeout) begin
            next_state = RESPMSGWAIT95;
            csm_to_RESPMSGWAIT95 = 1'b1;
         end
         else
            next_state = ST_Wait_Suc_Rec18;
      end
      RESPMSG23: begin
         next_state = ST_Done_Wait20;
         csm_to_ST_Done_Wait20 = 1'b1;
      end
      RESPMSGWAIT95: begin
         if (csm_timeout)
            next_state = RESPMSG23;
         else
            next_state = RESPMSGWAIT95;
      end
      ST_Done_Wait20: begin
         next_state = _Wait10;
         csm_to__Wait10 = 1'b1;
      end
      _Wait7: begin
         if (csm_timeout)
            next_state = ST_Enable_Data14;
         else
            next_state = _Wait7;
      end
      READ68: begin
         if (tx_mopshub == 0) begin
            next_state = READ69;
            csm_to_READ69 = 1'b1;
         end
         else
            next_state = READ68;
      end
      READ69: begin
         if (csm_timeout)
            next_state = s0;
         else
            next_state = READ69;
      end
      READ74: begin
         if (csm_timeout && (tx_mopshub == 0))
            next_state = REQMSG76;
         else
            next_state = READ74;
      end
      ACK151: begin
         if (txdec == 0) begin
            next_state = RESPMSGWAIT80;
            csm_to_RESPMSGWAIT80 = 1'b1;
         end
         else
            next_state = ACK151;
      end
      ACK152: begin
         if (csm_timeout) begin
            next_state = s9;
            csm_to_s9 = 1'b1;
         end
         else
            next_state = ACK152;
      end
      RESPMSGWAIT80: begin
         if (csm_timeout)
            next_state = RESPMSG75;
         else
            next_state = RESPMSGWAIT80;
      end
      REQMSG76: begin
         next_state = ACK151;
      end
      RESPMSG75: begin
         next_state = ACK152;
         csm_to_ACK152 = 1'b1;
      end
      _Wait5: begin
         if (csm_timeout) begin
            next_state = READ74;
            csm_to_READ74 = 1'b1;
         end
         else
            next_state = _Wait5;
      end
      _Wait8: begin
         if (csm_timeout)
            next_state = Start1;
         else
            next_state = _Wait8;
      end
      ST_Enable_Data16: begin
         if (end_write_emulator_spi ==1) begin
            next_state = ST_Wait_Suc_Tra21;
            csm_to_ST_Wait_Suc_Tra21 = 1'b1;
         end
         else
            next_state = ST_Enable_Data16;
      end
      ST_Wait_Suc_Tra21: begin
         if (csm_timeout)
            next_state = REQMSG25;
         else
            next_state = ST_Wait_Suc_Tra21;
      end
      REQMSG25: begin
         next_state = ST_Wait_Suc_Rec20;
         csm_to_ST_Wait_Suc_Rec20 = 1'b1;
      end
      ST_Wait_Suc_Rec20: begin
         if (csm_timeout) begin
            next_state = RESPMSGWAIT97;
            csm_to_RESPMSGWAIT97 = 1'b1;
         end
         else
            next_state = ST_Wait_Suc_Rec20;
      end
      RESPMSG25: begin
         next_state = ST_Done_Wait22;
         csm_to_ST_Done_Wait22 = 1'b1;
      end
      RESPMSGWAIT97: begin
         if (csm_timeout)
            next_state = RESPMSG25;
         else
            next_state = RESPMSGWAIT97;
      end
      ST_Done_Wait22: begin
         next_state = end_rand1;
      end
      _Wait10: begin
         if (csm_timeout)
            next_state = ST_Enable_Data16;
         else
            next_state = _Wait10;
      end
      s3: begin
         if (csm_timeout)
            next_state = ST_Enable_Data10;
         else
            next_state = s3;
      end
      s4: begin
         if (csm_timeout)
            next_state = ST_Enable_Data9;
         else
            next_state = s4;
      end
      _Wait6: begin
         if (csm_timeout)
            next_state = ST_test_tx_end;
         else
            next_state = _Wait6;
      end
      _Wait11: begin
         if (csm_timeout)
            next_state = ST_WAIT;
         else
            next_state = _Wait11;
      end
      s7: begin
         if (csm_timeout) begin
            next_state = DEFRAN;
            csm_to_DEFRAN = 1'b1;
         end
         else
            next_state = s7;
      end
      s8: begin
         if (csm_timeout) begin
            next_state = _Wait5;
            csm_to__Wait5 = 1'b1;
         end
         else
            next_state = s8;
      end
      s9: begin
         if (csm_timeout) begin
            next_state = _Wait7;
            csm_to__Wait7 = 1'b1;
         end
         else
            next_state = s9;
      end
      s0: begin
         next_state = s12;
         csm_to_s12 = 1'b1;
      end
      s12: begin
         if (csm_timeout)
            next_state = s14;
         else
            next_state = s12;
      end
      s13: begin
         if (csm_timeout) begin
            next_state = s8;
            csm_to_s8 = 1'b1;
         end
         else
            next_state = s13;
      end
      s14: begin
         next_state = s13;
         csm_to_s13 = 1'b1;
      end
      s1: begin
         if (csm_timeout)
            next_state = READ73;
         else
            next_state = s1;
      end
      ST_Loop_cnt6: begin
         next_state = s1;
         csm_to_s1 = 1'b1;
      end
      READ73: begin
         if (tx_mopshub == 0) begin
            next_state = s16;
            csm_to_s16 = 1'b1;
         end
         else
            next_state = READ73;
      end
      ST_loop1: begin
         if (counter8bit_reg_cld ==counter8bit_limit)
            next_state = ST_Rst_Cnt7;
         else
            next_state = ST_Loop_cnt6;
      end
      s15: begin
         next_state = s18;
         csm_to_s18 = 1'b1;
      end
      ST_Rst_Cnt7: begin
         next_state = s7;
         csm_to_s7 = 1'b1;
      end
      s16: begin
         if (csm_timeout)
            next_state = s15;
         else
            next_state = s16;
      end
      s18: begin
         if (csm_timeout)
            next_state = ACK148;
         else
            next_state = s18;
      end
      s26: begin
         if (csm_timeout)
            next_state = READ68;
         else
            next_state = s26;
      end
      DEFRAN: begin
         if (csm_timeout) begin
            next_state = READ4;
            csm_to_READ4 = 1'b1;
         end
         else
            next_state = DEFRAN;
      end
      READ4: begin
         if (csm_timeout && (tx_mopshub == 0)) begin
            next_state = REQMSGWAIT8;
            csm_to_REQMSGWAIT8 = 1'b1;
         end
         else
            next_state = READ4;
      end
      REQMSGWAIT8: begin
         if (csm_timeout)
            next_state = REQMSG8;
         else
            next_state = REQMSGWAIT8;
      end
      NXTRAN: begin
         next_state = READ4;
         csm_to_READ4 = 1'b1;
      end
      REQMSG8: begin
         next_state = ACK11;
         csm_to_ACK11 = 1'b1;
      end
      ACK12: begin
         if (doneran == 1) begin
            next_state = s26;
            csm_to_s26 = 1'b1;
         end
         else
            next_state = NXTRAN;
      end
      ACK11: begin
         if (csm_timeout)
            next_state = RESPMSG76;
         else
            next_state = ACK11;
      end
      RESPMSG69: begin
         next_state = s23;
         csm_to_s23 = 1'b1;
      end
      s23: begin
         if (csm_timeout) begin
            next_state = READ67;
            csm_to_READ67 = 1'b1;
         end
         else
            next_state = s23;
      end
      s22: begin
         if ((csm_timeout) && (sel_bus ==1 || counter8bit_reg_cld =={3'b0,n_buses}))
            next_state = ST_Rst_Cnt1;
         else if (csm_timeout)
            next_state = ST_Loop_cnt1;
         else
            next_state = s22;
      end
      RESPMSG70: begin
         next_state = READ66;
         csm_to_READ66 = 1'b1;
      end
      RESPMSG74: begin
         next_state = s28;
         csm_to_s28 = 1'b1;
      end
      s28: begin
         if ((csm_timeout) && (sel_bus ==1 || counter8bit_reg_cld =={3'b0,n_buses}))
            next_state = ST_Rst_Cnt3;
         else if (csm_timeout)
            next_state = ST_Loop_cnt2;
         else
            next_state = s28;
      end
      RESPMSG72: begin
         next_state = s27;
         csm_to_s27 = 1'b1;
      end
      s27: begin
         if (csm_timeout) begin
            next_state = s4;
            csm_to_s4 = 1'b1;
         end
         else
            next_state = s27;
      end
      RESPMSG71: begin
         next_state = s25;
         csm_to_s25 = 1'b1;
      end
      s25: begin
         if (csm_timeout) begin
            next_state = s3;
            csm_to_s3 = 1'b1;
         end
         else
            next_state = s25;
      end
      RESPMSG76: begin
         next_state = ACK13;
         csm_to_ACK13 = 1'b1;
      end
      s24: begin
         next_state = ST_loop1;
      end
      RESPMSG77: begin
         next_state = ST_loop1;
      end
      ACK148: begin
         if (txdec == 0 && tx_mopshub == 0)
            next_state = s24;
         else
            next_state = RESPMSG77;
      end
      s10: begin
         if (csm_timeout)
            next_state = READ73;
         else
            next_state = s10;
      end
      ACK13: begin
         if (csm_timeout)
            next_state = ACK12;
         else
            next_state = ACK13;
      end
      default: 
         next_state = ST_Reset;
   endcase
end // Next State Block

//-----------------------------------------------------------------
// Output Block for machine csm
//-----------------------------------------------------------------
always @(
   counter8bit_reg_cld, 
   current_state
)
begin : output_block_proc
   // Default Assignment
   irq_elink_tra = 0;
   end_read_elink = 0;
   buffer_en = 0;
   ch = 0;
   custommsg = 0;
   data = 0;
   start = 0;
   reqmsg = 0;
   respmsg = 0;
   indexsubindex = 0;
   read = 0;
   taildata = 0;
   write = 0;
   readadc = 0;
   customcanid = 0;
   test_rx_start = 0;
   test_rx_end = 0;
   test_elink_data_done = 0;
   start_write_emulator = 0;
   test_tx_end = 0;
   test_tx_start = 0;
   test_advanced_start = 0;
   test_advanced_end = 0;
   rand_rec_in = 76'b0;
   start_write_emulator_spi = 1'b0;
   test_simult = 1'b0;
   no_respmsg = 1'b0;
   random1000 = 0;
   sendran = 0;
   nextran = 0;

   // Combined Actions
   case (current_state) 
      ST_Reset: begin
         test_elink_data_done = 0;
         irq_elink_tra = 0;
         buffer_en = 0;
         end_read_elink = 0;
         test_rx_start = 0;
      end
      READ65: begin
         start = 1;
         readadc = 1 ;
         ch = 29 ;
      end
      REQMSG67: begin
         reqmsg = 1 ;
      end
      READ66: begin
         start = 1;
         readadc = 1 ;
         ch = 30 ;
      end
      REQMSG68: begin
         reqmsg = 1 ;
      end
      READ67: begin
         start = 1;
         readadc = 1 ;
         ch = 31 ;
      end
      REQMSG69: begin
         reqmsg = 1 ;
      end
      RESPMSG68: begin
         respmsg = 1 ;
      end
      END_ADC: begin
         test_rx_end = 1;
      end
      START_ADC: begin
         test_rx_start= 1;
      end
      ST_Done: begin
         test_elink_data_done =1;
      end
      ST_Done1: begin
         test_tx_end =1;
      end
      ST_test_tx_end: begin
         test_tx_start =1;
      end
      ST_En_Buffer1: begin
         buffer_en = 1;
      end
      ST_End_Read1: begin
         end_read_elink =1;
      end
      REQMSG5: begin
         reqmsg = 1 ;
      end
      RESPMSG5: begin
         respmsg = 1 ;
      end
      ST_Bus_cnt2: begin
         ch =12;
      end
      ST_start_test: begin
         irq_elink_tra  = 1;
         ch =12;
      end
      ST_Enable_Data9: begin
         ch = 12 ;
         start_write_emulator      = 1;
      end
      REQMSG15: begin
         reqmsg = 1 ;
      end
      ST_Enable_Data10: begin
         ch = 18;
         start_write_emulator      = 1;
      end
      REQMSG16: begin
         reqmsg = 1 ;
      end
      ST_Enable_Data11: begin
         ch = 17 ;
         start_write_emulator      = 1;
      end
      REQMSG17: begin
         reqmsg = 1 ;
      end
      ST_En_Buffer3: begin
         buffer_en = 1;
      end
      ST_End_Read3: begin
         end_read_elink =1;
      end
      REQMSG20: begin
         reqmsg = 1 ;
      end
      RESPMSG20: begin
         respmsg = 1 ;
      end
      ST_Bus_cnt4: begin
         ch =14;
      end
      ST_start_test2: begin
         irq_elink_tra  = 1;
         ch =14;
      end
      ST_En_Buffer4: begin
         buffer_en = 1;
      end
      ST_End_Read4: begin
         end_read_elink =1;
      end
      REQMSG21: begin
         reqmsg = 1 ;
      end
      RESPMSG21: begin
         respmsg = 1 ;
      end
      ST_Bus_cnt5: begin
         ch =15;
      end
      ST_start_test3: begin
         irq_elink_tra  = 1;
         ch =15;
      end
      Start1: begin
         test_advanced_start =1;
      end
      end_rand1: begin
         test_advanced_end =1;
      end
      ST_Enable_Data14: begin
         rand_rec_in = {1'b0, 3'h2,8'h0,64'h180DBEEFDEADBEAF};
         start_write_emulator_spi = 1;
      end
      REQMSG23: begin
         reqmsg = 1 ;
      end
      RESPMSG23: begin
         respmsg = 1 ;
      end
      READ68: begin
         start = 1;
         readadc = 1 ;
         ch = 29 ;
         test_simult =1;
      end
      READ69: begin
         test_simult =1;
      end
      READ74: begin
         start = 1;
         custommsg = 1;
         customcanid ={4'h4,7'h0};
         data = 64'hBEEFBEEFBEEFBEEF;
      end
      REQMSG76: begin
         reqmsg = 1 ;
      end
      RESPMSG75: begin
         respmsg = 1 ;
      end
      ST_Enable_Data16: begin
         rand_rec_in = {1'b0, 3'h3,8'h0,64'hDEADBEEFDEADBEAF};
         start_write_emulator_spi = 1;
      end
      REQMSG25: begin
         reqmsg = 1 ;
      end
      RESPMSG25: begin
         respmsg = 1 ;
      end
      s0: begin
         reqmsg = 1 ;
         test_simult =1;
      end
      s12: begin
         test_simult =1;
      end
      s13: begin
         test_simult =1;
      end
      s14: begin
         respmsg =1'b1;
         test_simult =1;
      end
      READ73: begin
         start = 1;
         custommsg = 1;
         customcanid = {4'hC,7'h1};
         data = {counter8bit_reg_cld,56'hDEADBEEFDEADBE};
      end
      s15: begin
         reqmsg = 1 ;
      end
      DEFRAN: begin
         random1000 = 1 ;
      end
      READ4: begin
         start = 1;
         random1000 = 1 ; 
         sendran  = 1 ;
      end
      REQMSGWAIT8: begin
         random1000 = 1 ;
      end
      NXTRAN: begin
         nextran = 1 ;
      end
      REQMSG8: begin
         random1000 = 1 ; 
         reqmsg = 1 ;
      end
      ACK12: begin
         random1000 = 1 ;
      end
      ACK11: begin
         random1000 = 1 ;
      end
      RESPMSG69: begin
         respmsg = 1 ;
      end
      RESPMSG70: begin
         respmsg = 1 ;
      end
      RESPMSG74: begin
         respmsg = 1 ;
      end
      RESPMSG72: begin
         respmsg = 1 ;
      end
      RESPMSG71: begin
         respmsg = 1 ;
      end
      RESPMSG76: begin
         random1000 = 1 ;
         respmsg = 1 ;
      end
      s24: begin
         respmsg = 1 ;
      end
      RESPMSG77: begin
         no_respmsg = 1 ;
      end
      ACK13: begin
         random1000 = 1 ;
      end
   endcase
end // Output Block

//-----------------------------------------------------------------
// Clocked Block for machine csm
//-----------------------------------------------------------------
always @(
   posedge clk, 
   negedge rst
) 
begin : clocked_block_proc
   if (!rst) begin
      current_state <= ST_Reset;
      csm_timer <= 17'd0;
   end
   else 
   begin
      current_state <= next_state;
      csm_timer <= csm_next_timer;

      // Combined Actions
      case (current_state) 
         ST_Reset: begin
            counter8bit_reg_cld = 1'b0;
            responsereg_cld = 76'b0;
            requestreg_cld = 76'b0;
         end
         ACK133: begin
            requestreg_cld = data_rec_uplink;
         end
         REQMSGWAIT67: begin
            requestreg_cld = data_rec_uplink;
         end
         RESPMSGWAIT66: begin
            responsereg_cld <= data_rec_uplink;
         end
         REQMSG67: begin
            requestreg_cld = data_rec_uplink;
         end
         ACK135: begin
            requestreg_cld = data_rec_uplink;
         end
         REQMSGWAIT68: begin
            requestreg_cld = data_rec_uplink;
         end
         RESPMSGWAIT67: begin
            responsereg_cld <= data_rec_uplink;
         end
         REQMSG68: begin
            requestreg_cld = data_rec_uplink;
         end
         ACK137: begin
            requestreg_cld = data_rec_uplink;
         end
         REQMSGWAIT69: begin
            requestreg_cld = data_rec_uplink;
         end
         RESPMSGWAIT68: begin
            responsereg_cld <= data_rec_uplink;
         end
         REQMSG69: begin
            requestreg_cld = data_rec_uplink;
         end
         RESPMSG68: begin
             responsereg_cld <= data_rec_uplink;
         end
         ST_Loop_cnt: begin
            counter8bit_reg_cld <= counter8bit_reg_cld+1;
         end
         ST_Loop_cnt1: begin
            counter8bit_reg_cld <= counter8bit_reg_cld+1;
         end
         ST_Rst_Cnt1: begin
            counter8bit_reg_cld <=8'b0;
         end
         ST_Rst_Cnt2: begin
            counter8bit_reg_cld <= 8'b0;
         end
         ST_Loop_cnt2: begin
            counter8bit_reg_cld <= counter8bit_reg_cld+1;
         end
         ST_Rst_Cnt3: begin
            counter8bit_reg_cld <= 8'b0;
         end
         ST_Wait_Suc_Tra10: begin
            requestreg_cld <= data_tra_downlink;
         end
         REQMSG15: begin
            requestreg_cld <= data_tra_downlink;
         end
         RESPMSGWAIT87: begin
            responsereg_cld <= data_rec_uplink;
         end
         ST_Wait_Suc_Tra11: begin
            requestreg_cld <= data_tra_downlink;
         end
         REQMSG16: begin
            requestreg_cld <= data_tra_downlink;
         end
         RESPMSGWAIT88: begin
            responsereg_cld <= data_rec_uplink;
         end
         ST_Wait_Suc_Tra12: begin
            requestreg_cld <= data_tra_downlink;
         end
         REQMSG17: begin
            requestreg_cld <= data_tra_downlink;
         end
         ST_Wait_Suc_Rec12: begin
            requestreg_cld <= data_tra_downlink;
         end
         RESPMSGWAIT89: begin
            responsereg_cld <= data_rec_uplink;
         end
         s12: begin
            requestreg_cld <= data_rec_uplink;
         end
         s13: begin
            responsereg_cld <= data_tra_decoder;
         end
         ST_Loop_cnt6: begin
            counter8bit_reg_cld <= counter8bit_reg_cld+1;
         end
         s15: begin
            requestreg_cld <= data_rec_uplink;
         end
         ST_Rst_Cnt7: begin
            counter8bit_reg_cld <= 1'b0;
         end
         s16: begin
            requestreg_cld <= data_rec_uplink;
         end
         s18: begin
            responsereg_cld <= data_tra_decoder;
         end
         REQMSGWAIT8: begin
            requestreg_cld <= data_rec_uplink;
         end
         REQMSG8: begin
            requestreg_cld <= data_rec_uplink;
         end
         ACK11: begin
            responsereg_cld <= data_tra_decoder;
         end
         RESPMSG69: begin
             responsereg_cld <= data_rec_uplink;
         end
         s23: begin
            responsereg_cld <= data_rec_uplink;
         end
         s22: begin
            responsereg_cld <= data_rec_uplink;
         end
         RESPMSG70: begin
             responsereg_cld <= data_rec_uplink;
         end
         RESPMSG74: begin
            responsereg_cld <= data_rec_uplink;
         end
         s28: begin
            responsereg_cld <= data_rec_uplink;
         end
         RESPMSG72: begin
             responsereg_cld <= data_rec_uplink;
         end
         s27: begin
            responsereg_cld <= data_rec_uplink;
         end
         RESPMSG71: begin
             responsereg_cld <= data_rec_uplink;
         end
         s25: begin
            responsereg_cld <= data_rec_uplink;
         end
         RESPMSG76: begin
            responsereg_cld <= data_tra_decoder;
         end
         s24: begin
            responsereg_cld <= data_tra_decoder;
         end
         RESPMSG77: begin
            responsereg_cld <= data_tra_decoder;
         end
         ACK148: begin
            responsereg_cld <= data_tra_decoder;
         end
      endcase
   end
end // Clocked Block

//-----------------------------------------------------------------
// Wait state logic for machine csm
//-----------------------------------------------------------------
always @(
   csm_timer,
   csm_to_READ65,
   csm_to_ACK133,
   csm_to_REQMSGWAIT67,
   csm_to_RESPMSGWAIT66,
   csm_to_READ66,
   csm_to_ACK135,
   csm_to_REQMSGWAIT68,
   csm_to_RESPMSGWAIT67,
   csm_to_READ67,
   csm_to_ACK137,
   csm_to_REQMSGWAIT69,
   csm_to_RESPMSGWAIT68,
   csm_to_ST_Done_Wait,
   csm_to_ST_counter_Wait1,
   csm_to_RESPMSGWAIT85,
   csm_to_ST_Wait_Suc_Rec1,
   csm_to_ST_Wait_Suc_Tra10,
   csm_to_ST_Wait_Suc_Rec10,
   csm_to_RESPMSGWAIT87,
   csm_to_ST_Wait_Suc_Tra11,
   csm_to_ST_Wait_Suc_Rec11,
   csm_to_RESPMSGWAIT88,
   csm_to_ST_Wait_Suc_Tra12,
   csm_to_ST_Wait_Suc_Rec12,
   csm_to_RESPMSGWAIT89,
   csm_to_ST_Wait_Suc_Tra14,
   csm_to_ST_Done_Wait15,
   csm_to_RESPMSGWAIT92,
   csm_to_ST_Wait_Suc_Rec15,
   csm_to_ST_Wait_Suc_Tra16,
   csm_to_ST_Done_Wait17,
   csm_to_RESPMSGWAIT93,
   csm_to_ST_Wait_Suc_Rec16,
   csm_to_ST_Wait_Suc_Tra17,
   csm_to_ST_Done_Wait18,
   csm_to__Wait3,
   csm_to_ST_Wait_Suc_Tra19,
   csm_to_ST_Wait_Suc_Rec18,
   csm_to_RESPMSGWAIT95,
   csm_to_ST_Done_Wait20,
   csm_to__Wait7,
   csm_to_READ69,
   csm_to_READ74,
   csm_to_ACK152,
   csm_to_RESPMSGWAIT80,
   csm_to__Wait5,
   csm_to__Wait8,
   csm_to_ST_Wait_Suc_Tra21,
   csm_to_ST_Wait_Suc_Rec20,
   csm_to_RESPMSGWAIT97,
   csm_to_ST_Done_Wait22,
   csm_to__Wait10,
   csm_to_s3,
   csm_to_s4,
   csm_to__Wait6,
   csm_to__Wait11,
   csm_to_s7,
   csm_to_s8,
   csm_to_s9,
   csm_to_s12,
   csm_to_s13,
   csm_to_s1,
   csm_to_s16,
   csm_to_s18,
   csm_to_s26,
   csm_to_DEFRAN,
   csm_to_READ4,
   csm_to_REQMSGWAIT8,
   csm_to_ACK11,
   csm_to_s23,
   csm_to_s22,
   csm_to_s28,
   csm_to_s27,
   csm_to_s25,
   csm_to_s10,
   csm_to_ACK13
)
begin : csm_wait_block_proc
   csm_timeout = (csm_timer == 17'd0);
   if (csm_to_READ65 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_ACK133 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_REQMSGWAIT67 == 1'b1) begin
      csm_next_timer = 17'd3999;  //no cycles(4000)-1=3999
   end
   else if (csm_to_RESPMSGWAIT66 == 1'b1) begin
      csm_next_timer = 17'd3999;  //no cycles(4000)-1=3999
   end
   else if (csm_to_READ66 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_ACK135 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_REQMSGWAIT68 == 1'b1) begin
      csm_next_timer = 17'd3999;  //no cycles(4000)-1=3999
   end
   else if (csm_to_RESPMSGWAIT67 == 1'b1) begin
      csm_next_timer = 17'd3999;  //no cycles(4000)-1=3999
   end
   else if (csm_to_READ67 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_ACK137 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_REQMSGWAIT69 == 1'b1) begin
      csm_next_timer = 17'd3999;  //no cycles(4000)-1=3999
   end
   else if (csm_to_RESPMSGWAIT68 == 1'b1) begin
      csm_next_timer = 17'd3999;  //no cycles(4000)-1=3999
   end
   else if (csm_to_ST_Done_Wait == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_counter_Wait1 == 1'b1) begin
      csm_next_timer = 17'd1999;  //no cycles(2000)-1=1999
   end
   else if (csm_to_RESPMSGWAIT85 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_ST_Wait_Suc_Rec1 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Wait_Suc_Tra10 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Wait_Suc_Rec10 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_RESPMSGWAIT87 == 1'b1) begin
      csm_next_timer = 17'd99999;  //no cycles(100000)-1=99999
   end
   else if (csm_to_ST_Wait_Suc_Tra11 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Wait_Suc_Rec11 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_RESPMSGWAIT88 == 1'b1) begin
      csm_next_timer = 17'd99999;  //no cycles(100000)-1=99999
   end
   else if (csm_to_ST_Wait_Suc_Tra12 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Wait_Suc_Rec12 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_RESPMSGWAIT89 == 1'b1) begin
      csm_next_timer = 17'd99999;  //no cycles(100000)-1=99999
   end
   else if (csm_to_ST_Wait_Suc_Tra14 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Done_Wait15 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_RESPMSGWAIT92 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_ST_Wait_Suc_Rec15 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Wait_Suc_Tra16 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Done_Wait17 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_RESPMSGWAIT93 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_ST_Wait_Suc_Rec16 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Wait_Suc_Tra17 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Done_Wait18 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to__Wait3 == 1'b1) begin
      csm_next_timer = 17'd19999;  //no cycles(20000)-1=19999
   end
   else if (csm_to_ST_Wait_Suc_Tra19 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Wait_Suc_Rec18 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_RESPMSGWAIT95 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_ST_Done_Wait20 == 1'b1) begin
      csm_next_timer = 17'd14999;  //no cycles(15000)-1=14999
   end
   else if (csm_to__Wait7 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_READ69 == 1'b1) begin
      csm_next_timer = 17'd49999;  //no cycles(50000)-1=49999
   end
   else if (csm_to_READ74 == 1'b1) begin
      csm_next_timer = 17'd999;  //no cycles(1000)-1=999
   end
   else if (csm_to_ACK152 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_RESPMSGWAIT80 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to__Wait5 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to__Wait8 == 1'b1) begin
      csm_next_timer = 17'd49999;  //no cycles(50000)-1=49999
   end
   else if (csm_to_ST_Wait_Suc_Tra21 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_ST_Wait_Suc_Rec20 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_RESPMSGWAIT97 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_ST_Done_Wait22 == 1'b1) begin
      csm_next_timer = 17'd14999;  //no cycles(15000)-1=14999
   end
   else if (csm_to__Wait10 == 1'b1) begin
      csm_next_timer = 17'd4999;  //no cycles(5000)-1=4999
   end
   else if (csm_to_s3 == 1'b1) begin
      csm_next_timer = 17'd19999;  //no cycles(20000)-1=19999
   end
   else if (csm_to_s4 == 1'b1) begin
      csm_next_timer = 17'd19999;  //no cycles(20000)-1=19999
   end
   else if (csm_to__Wait6 == 1'b1) begin
      csm_next_timer = 17'd39999;  //no cycles(40000)-1=39999
   end
   else if (csm_to__Wait11 == 1'b1) begin
      csm_next_timer = 17'd49999;  //no cycles(50000)-1=49999
   end
   else if (csm_to_s7 == 1'b1) begin
      csm_next_timer = 17'd19999;  //no cycles(20000)-1=19999
   end
   else if (csm_to_s8 == 1'b1) begin
      csm_next_timer = 17'd19999;  //no cycles(20000)-1=19999
   end
   else if (csm_to_s9 == 1'b1) begin
      csm_next_timer = 17'd19999;  //no cycles(20000)-1=19999
   end
   else if (csm_to_s12 == 1'b1) begin
      csm_next_timer = 17'd1;  //no cycles(2)-1=1
   end
   else if (csm_to_s13 == 1'b1) begin
      csm_next_timer = 17'd49999;  //no cycles(50000)-1=49999
   end
   else if (csm_to_s1 == 1'b1) begin
      csm_next_timer = 17'd9999;  //no cycles(10000)-1=9999
   end
   else if (csm_to_s16 == 1'b1) begin
      csm_next_timer = 17'd1;  //no cycles(2)-1=1
   end
   else if (csm_to_s18 == 1'b1) begin
      csm_next_timer = 17'd1;  //no cycles(2)-1=1
   end
   else if (csm_to_s26 == 1'b1) begin
      csm_next_timer = 17'd19999;  //no cycles(20000)-1=19999
   end
   else if (csm_to_DEFRAN == 1'b1) begin
      csm_next_timer = 17'd1999;  //no cycles(2000)-1=1999
   end
   else if (csm_to_READ4 == 1'b1) begin
      csm_next_timer = 17'd1499;  //no cycles(1500)-1=1499
   end
   else if (csm_to_REQMSGWAIT8 == 1'b1) begin
      csm_next_timer = 17'd3999;  //no cycles(4000)-1=3999
   end
   else if (csm_to_ACK11 == 1'b1) begin
      csm_next_timer = 17'd13999;  //no cycles(14000)-1=13999
   end
   else if (csm_to_s23 == 1'b1) begin
      csm_next_timer = 17'd2;  //no cycles(3)-1=2
   end
   else if (csm_to_s22 == 1'b1) begin
      csm_next_timer = 17'd2;  //no cycles(3)-1=2
   end
   else if (csm_to_s28 == 1'b1) begin
      csm_next_timer = 17'd2;  //no cycles(3)-1=2
   end
   else if (csm_to_s27 == 1'b1) begin
      csm_next_timer = 17'd2;  //no cycles(3)-1=2
   end
   else if (csm_to_s25 == 1'b1) begin
      csm_next_timer = 17'd2;  //no cycles(3)-1=2
   end
   else if (csm_to_s10 == 1'b1) begin
      csm_next_timer = 17'd19999;  //no cycles(20000)-1=19999
   end
   else if (csm_to_ACK13 == 1'b1) begin
      csm_next_timer = 17'd3999;  //no cycles(4000)-1=3999
   end
   else begin
      csm_next_timer = (csm_timeout)? 17'd0: (csm_timer - 17'd1);
   end
end // Wait State Block
// Concurrent Statements
// Clocked output assignments
always @(
   requestreg_cld, 
   responsereg_cld, 
   counter8bit_reg_cld
)
begin : clocked_output_proc
   requestreg = requestreg_cld;
   responsereg = responsereg_cld;
   counter8bit_reg = counter8bit_reg_cld;
end
endmodule // data_generator_sm
